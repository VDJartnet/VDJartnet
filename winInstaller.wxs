<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Name="VDJartnet" Manufacturer="VDJartnet" Id="d557b374-3b60-457a-b6e0-9c3b12e0aa96" UpgradeCode="73a9d409-7478-4a43-914b-603c16a3cd7c" Language="1033" Codepage="1252" Version="0.2.1"> <!--Replace version with autogenerated-->

    <Package Id="*" Keywords="Installer" Description="VDJartnet Installer" Comments="VDJartnet is distributed under the GPLv3 licence" Manufacturer="VDJartnet" InstallerVersion="100" Languages="1033" Compressed="yes" SummaryCodepage="1252" />

    <Condition Message="VirtualDJ must be installed to use VDJartnet.">
      <![CDATA[Installed OR VDJINSTALLED]]>
    </Condition>

    <Directory Id='TARGETDIR' Name='SourceDir'>
      <Directory Id="PersonalFolder" Name="Documents">
        <Directory Id="VirtualDJ" Name="VirtualDJ">
          <Directory Id="Plugins" Name="Plugins">
            <Directory Id="AutoStart" Name="AutoStart">

              <Component Id="VDJartnet.dll" Guid="*">
                <File Id="VDJartnet.dll" Name="VDJartnet.dll" Source="VDJartnet.dll" KeyPath="yes" Vital="yes" />
              </Component>

              <Directory Id="VDJartnet" Name="VDJartnet">

                <Component Id="config.txt" Guid="*">
                  <File Id="config.txt" Name="config.txt" KeyPath="yes" Vital="no" />
                </Component>

                <Component Id="presets.txt" Guid="*">
                  <File Id="presets.txt" Name="presets.txt" KeyPath="yes" Vital="no" />
                </Component>

              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <Property Id="VDJINSTALLED">
      <DirectorySearch Id="VirtualDJProgram" Path="C:\Program Files\VirtualDJ\" Depth="0" />
    </Property>

    <Property Id="CONFIGEXISTS">
      <DirectorySearch Id="VDJartnet" Path="[VDJartnet]" Depth="0">
        <FileSearch Name="config.txt" />
      </DirectorySearch>
    </Property>

    <Property Id="PRESETSEXISTS">
      <DirectorySearchRef Id="VDJartnet">
        <FileSearch Name="presets.txt" />
      </DirectorySearchRef>
    </Property>

    <Feature Id="VDJartnet.dll" Title="VDJartnet" Description="Install VDJartnet" Level="1" Absent="disallow">
      <ComponentRef Id="VDJartnet.dll" />
    </Feature>

    <Feature Id="config.txt" Title="config.txt" Description="Install updated config.txt" Level="1" Absent="allow">
      <ComponentRef Id="config.txt" />
      <Condition Level="0">
        CONFIGEXISTS
      </Condition>
    </Feature>

    <Feature Id="presets.txt" Title="presets.txt" Description="Install updated presets.txt" Level="1" Absent="allow">
      <ComponentRef Id="presets.txt" />
      <Condition Level="0">
        PRESETSEXISTS
      </Condition>
    </Feature>

    <WixVariable Id="WixUIReadmeRtf" Value="README.rtf" />
    <WixVariable Id="WixUILicenseRtf" Value="COPYING" />

    <!--<UI Id="MyWixUI_Mondo">-->
      <UIRef Id="WixUI_FeatureTree" />
      <UIRef Id="WixUI_ErrorProgressText" />
<!--
      <DialogRef Id="ReadmeDlg" />

      <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="ReadmeDlg">NOT Installed</Publish>
      <Publish Dialog="LicenseAgreementDlg" Control="Back" Event="NewDialog" Value="ReadmeDlg">1</Publish>
    </UI>
-->
  </Product>
</Wix>
